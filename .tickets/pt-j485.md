---
id: pt-j485
status: closed
deps: [pt-c2b0]
links: [pt-c2b0]
created: 2026-02-08T19:32:06Z
type: task
priority: 2
assignee: legout
external-ref: seed-add-ralph-loop-timeout-restarts
tags: [tf, backlog, component:api, component:workflow]
---
# Ensure cleanup semantics after timeout (worktrees/lock/progress)

## Task
Ensure all relevant cleanup is performed when a timeout occurs, including worktrees (parallel), locks, and progress state updates.

## Context
A timeout must not leave dangling worktrees, lock files, or half-written state that breaks subsequent runs.

## Acceptance Criteria
- [ ] `tf ralph` lock handling remains correct on timeout (no stale lock)
- [ ] Progress/state files reflect timeout + retry/fail outcome
- [ ] Parallel worktree mode does not regress (at minimum, timeout paths donâ€™t crash the loop)

## Constraints
- Prefer warn+disable in parallel mode over partial/unsafe behavior

## References
- Seed: seed-add-ralph-loop-timeout-restarts



## Notes

**2026-02-08T20:19:53Z**

Implementation complete. Added parallel mode safety check that warns and falls back to serial mode when timeout/restart settings are configured. Commit: 11c48da
